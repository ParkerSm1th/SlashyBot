const Discord = require("discord.js");
const hastebin = require('eval-overflow');
exports.run = async(client, msg, args) => {
  const code = args.join(" ");
  try {
    const evaled = client.clean(await eval(code));
    if (evaled.length > 1500) {
      hastebin(`${evaled}`, "js").then(r => {
        msg.channel.send(`Evaled code is over 1500 letters. Uploaded to ${r}.`);
      }).catch(console.error);
    } else {
      msg.channel.send(`\`\`\`xl\n${evaled}\n\`\`\``);
    }
  } catch (err) {
    msg.channel.send(`\`ERROR\` \`\`\`xl\n${client.clean(err)}\n\`\`\``);
  }
};

exports.conf = {
  enabled: true,
  guildOnly: false,
  aliases: [],
  permLevel: 4
};

exports.help = {
  name: 'eval',
  description: 'Evaluates arbitrary javascript.',
  usage: 'eval [...code]'
};
